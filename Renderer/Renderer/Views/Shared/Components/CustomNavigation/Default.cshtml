@using Renderer.ViewModels
@model CustomNavigationViewModel

<nav class="@Model.WrapperCssClass custom-mega-navbar">
    <div class="container">
        <ul class="nav-list">
            @foreach (var node in Model.Nodes)
            {
                <li class="navigation-item position-relative">
                    <a class="navigation-link px-3 py-2 d-inline-block @(node.IsCurrentlyOpened ? "active" : "")" href="@node.Url">
                        @node.Title
                    </a>

                    @if (node.ChildNodes?.Count > 0)
                    {
                        <ul class="navigation-dropdown-menu shadow p-3">
                            @foreach (var child in node.ChildNodes)
                            {
                                <li class="navigation-item position-relative">
                                    <a class="dropdown-item @(child.IsCurrentlyOpened ? "active" : "")" href="@child.Url">
                                        @child.Title
                                    </a>

                                    @if (child.ChildNodes?.Count > 0)
                                    {
                                        <ul class="navigation-dropdown-menu sub-menu shadow p-3">
                                            @foreach (var grandChild in child.ChildNodes)
                                            {
                                                <li class="navigation-item">
                                                    <a class="dropdown-item @(grandChild.IsCurrentlyOpened ? "active" : "")" href="@grandChild.Url">
                                                        @grandChild.Title
                                                    </a>
                                                </li>
                                            }
                                        </ul>
                                    }
                                </li>
                            }
                        </ul>
                    }
                </li>
            }
        </ul>
    </div>
</nav>
